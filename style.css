* { 
  box-sizing: border-box; 
  font-family: Inter, Arial; 
}

body { 
  margin:0; 
  background:#d6f0ff; 
  overflow:hidden; 
}

#ui { position:fixed; inset:0; }

/* HEADER */
#header { 
  position:absolute; 
  top:18px; 
  left:18px; 
  display:flex; 
  gap:12px; 
  z-index:10; 
}

#logo { width:48px; height:48px; border-radius:8px; }

#score { 
  color:white; 
  font-size:28px; 
  font-weight:800; 
  text-shadow:0 0 8px rgba(0,0,0,.6); 
}

/* GAME CANVAS */
canvas { 
  position:absolute; 
  inset:0; 
  width:100%; 
  height:100%; 
}

/* ‚≠ê PANEL ‚Äî FIXED WIDTH, HEIGHT, NO OVERLAP */
.panel {
  position:fixed;
  left:50%; 
  top:50%;
  transform:translate(-50%, -52%);
  width:470px;            
  max-height:65vh;        
  padding:22px 24px 28px;
  background:white;
  border-radius:18px;
  box-shadow:0 20px 60px rgba(0,0,0,.3);
  z-index:250;

  overflow-y:auto;
  scroll-behavior:smooth;
}

.hidden { display:none; }

.panel button {
  background:#2b6cb0;
  padding:12px 16px;
  border-radius:12px;
  color:white;
  border:0;
  cursor:pointer;
  width:100%;
  margin-top:14px;
  font-size:17px;
}

/* ‚≠ê SHOP TABS */
.shop-tabs {
  display:flex;
  gap:10px;
  margin-top:4px;
  margin-bottom:14px;
}

.shop-tab {
  flex:1;
  padding:10px;
  text-align:center;
  background:#e9ecf3;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
  transition:.15s;
}

.shop-tab.active {
  background:#2b6cb0;
  color:white;
}

/* ‚≠ê GRID ‚Äî CLEANED */
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(140px, 1fr));
  gap:18px;
  padding-bottom:15px;
}

/* ‚≠ê CARD ‚Äî FIXED SPACING & SIZE */
.grid-card, .skinCard {
  background:white;
  padding:16px;
  border-radius:16px;
  text-align:center;
  border:1px solid #eee;
  position:relative;
  transition:transform .15s, box-shadow .15s;
}

.grid-card:hover, .skinCard:hover {
  transform:translateY(-6px);
  box-shadow:0 12px 28px rgba(0,0,0,.18);
}

/* IMAGE */
.grid-card img, .skinCard img {
  width:95px;
  height:95px;
  border-radius:50%;
  object-fit:cover;
  border:4px solid #ccc;
}

/* ‚≠ê RARITY COLORS */
.common img { border-color:#bfbfbf; }
.rare img { border-color:#4aa3ff; }
.epic img { border-color:#b44bff; }
.legendary img { border-color:#ffb100; }

/* ‚≠ê BADGES */
.badge {
  position:absolute; 
  top:8px; 
  right:8px;
  padding:5px 8px;
  font-size:11px;
  font-weight:700;
  border-radius:8px;
  color:white;
}

.badge.locked { background:#e63946; }
.badge.owned  { background:#2a9d8f; }

/* ‚≠ê NAV BAR */
.nav-bar {
  position:fixed;
  bottom:28px; 
  left:50%; 
  transform:translateX(-50%);

  display:flex;
  gap:18px;
  padding:16px 26px;

  background:rgba(255,255,255,0.22);
  backdrop-filter:blur(12px);
  border-radius:45px;
  box-shadow:0 12px 34px rgba(0,0,0,.25);

  z-index:150;
}

.nav-btn {
  border:0;
  background:transparent;
  width:78px; 
  height:78px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size:28px;
  color:white;
  border-radius:20px;
  transition:transform .15s;
}

.nav-btn:hover { transform:translateY(-6px); }

.nav-label {
  font-size:13px;
  color:white;
  margin-top:4px;
}

/* GAME OVER */
#gameOverPanel { 
  text-align:center; 
  font-size:20px; 
}

/* ======================================================
     ‚≠ê EXISTING ANIMATIONS
====================================================== */

@keyframes floatUp {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-6px); }
  100% { transform: translateY(0px); }
}

@keyframes pulseGlow {
  0% { box-shadow: 0 0 5px rgba(255,255,255,0.3); }
  50% { box-shadow: 0 0 18px rgba(255,255,255,0.8); }
  100% { box-shadow: 0 0 5px rgba(255,255,255,0.3); }
}

@keyframes legendaryShine {
  0% { box-shadow: 0 0 12px rgba(255,191,0,0.4); }
  50% { box-shadow: 0 0 30px rgba(255,191,0,1); }
  100% { box-shadow: 0 0 12px rgba(255,191,0,0.4); }
}

@keyframes epicPulse {
  0% { box-shadow: 0 0 10px rgba(180,75,255,0.3); }
  50% { box-shadow: 0 0 22px rgba(180,75,255,1); }
  100% { box-shadow: 0 0 10px rgba(180,75,255,0.3); }
}

@keyframes rareGlow {
  0% { box-shadow: 0 0 10px rgba(74,163,255,0.3); }
  50% { box-shadow: 0 0 22px rgba(74,163,255,1); }
  100% { box-shadow: 0 0 10px rgba(74,163,255,0.3); }
}

/* ‚≠ê COMMON */
.common {
  animation: floatUp 3s ease-in-out infinite;
}

/* ‚≠ê RARE */
.rare {
  animation: rareGlow 2.6s ease-in-out infinite, floatUp 3s ease-in-out infinite;
}

/* ‚≠ê EPIC */
.epic {
  animation: epicPulse 2.4s ease-in-out infinite, floatUp 3s ease-in-out infinite;
}

/* ‚≠ê LEGENDARY */
.legendary {
  animation: legendaryShine 2s ease-in-out infinite, floatUp 3s ease-in-out infinite;
  background: linear-gradient(145deg, #fff8d8, #ffe08a, #fff3c0);
}

/* ======================================================================
      ‚≠ê‚≠ê NEW REQUESTED ADD-ONS (Particle + Electric + Rainbow)
   ====================================================================== */

/* ‚≠ê 1. ELECTRIC LEGENDARY BORDER ‚ö° */
.legendary {
  position: relative;
  overflow: hidden;
}
.legendary::before {
  content: "";
  position: absolute;
  inset: -4px;
  border-radius: 18px;
  background: conic-gradient(#ffbb00, #ffd500, #ff9100, #ffbb00);
  z-index: -1;
  filter: blur(8px);
  animation: legendaryElectric 2.2s linear infinite;
}
@keyframes legendaryElectric {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ‚≠ê 2. EPIC RAINBOW PULSE üåà */
.epic {
  position: relative;
}
.epic::before {
  content:"";
  position:absolute;
  inset:-3px;
  border-radius:18px;
  background:linear-gradient(135deg,#ff00c8,#7700ff,#00a2ff,#ff00c8);
  background-size:300% 300%;
  filter:blur(6px);
  z-index:-1;
  animation:epicRainbow 3s ease-in-out infinite;
}
@keyframes epicRainbow {
  0% { background-position:0% 50%; }
  50% { background-position:100% 50%; }
  100% { background-position:0% 50%; }
}

/* ‚≠ê 3. SPARK PARTICLES ‚ú® (Epic + Legendary) */
.legendary::after,
.epic::after {
  content:"";
  position:absolute;
  width:160%;
  height:160%;
  top:-30%;
  left:-30%;
  pointer-events:none;
  background-image:
    radial-gradient(circle, rgba(255,255,255,0.8) 2px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,0.6) 2px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,0.4) 3px, transparent 3px);
  background-size:80px 80px, 120px 120px, 100px 100px;
  animation:sparkleFloat 6s linear infinite;
  opacity:0.8;
}
@keyframes sparkleFloat {
  0% { transform:translate(0,0) rotate(0deg); }
  50% { transform:translate(10px,-10px) rotate(180deg); }
  100% { transform:translate(0,0) rotate(360deg); }
}

/* ‚≠ê 4. COLORFUL HEADINGS */
.panel h3 {
  font-size:22px;
  font-weight:900;
  text-align:center;
  margin-bottom:10px;
  background:linear-gradient(90deg,#ff00c8,#7700ff,#00d0ff,#00ffa8);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:headingGlow 4s ease-in-out infinite;
}

@keyframes headingGlow {
  0% { filter:brightness(1); }
  50% { filter:brightness(1.5); }
  100% { filter:brightness(1); }
}
/* ==========================================================
      ‚≠ê APPLY RARITY EFFECTS TO THEMES AS WELL
      (same animations as characters)
========================================================== */

/* ‚≠ê THEME COMMON */
.theme-common {
  animation: floatUp 3s ease-in-out infinite;
}
.theme-common img {
  border-color:#bfbfbf !important;
}

/* ‚≠ê THEME RARE */
.theme-rare {
  animation: rareGlow 2.6s ease-in-out infinite, floatUp 3s ease-in-out infinite;
}
.theme-rare img {
  border-color:#4aa3ff !important;
}

/* ‚≠ê THEME EPIC (RAINBOW EFFECT üåà) */
.theme-epic {
  position:relative;
  animation: epicPulse 2.4s ease-in-out infinite, floatUp 3s ease-in-out infinite;
}
.theme-epic img {
  border-color:#b44bff !important;
}
.theme-epic::before {
  content:"";
  position:absolute;
  inset:-3px;
  border-radius:18px;
  background:linear-gradient(135deg,#ff00c8,#7700ff,#00a2ff,#ff00c8);
  background-size:300% 300%;
  filter:blur(6px);
  z-index:-1;
  animation:epicRainbow 3s ease-in-out infinite;
}
.theme-epic::after {
  content:"";
  position:absolute;
  width:160%;
  height:160%;
  top:-30%;
  left:-30%;
  pointer-events:none;
  background-image:
    radial-gradient(circle, rgba(255,255,255,0.8) 2px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,0.6) 2px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,0.4) 3px, transparent 3px);
  background-size:80px 80px, 120px 120px, 100px 100px;
  animation:sparkleFloat 6s linear infinite;
  opacity:0.8;
}

/* ‚≠ê THEME LEGENDARY (ELECTRIC GOLD ‚ö°) */
.theme-legendary {
  position:relative;
  animation: legendaryShine 2s ease-in-out infinite, floatUp 3s ease-in-out infinite;
  background: linear-gradient(145deg, #fff8d8, #ffe08a, #fff3c0);
}
.theme-legendary img {
  border-color:#ffb100 !important;
  box-shadow:0 0 10px rgba(255,200,0,0.6);
}
.theme-legendary::before {
  content:"";
  position:absolute;
  inset:-4px;
  border-radius:18px;
  background:conic-gradient(#ffbb00, #ffd500, #ff9100, #ffbb00);
  filter:blur(8px);
  z-index:-1;
  animation:legendaryElectric 2.2s linear infinite;
}
.theme-legendary::after {
  content:"";
  position:absolute;
  width:160%;
  height:160%;
  top:-30%;
  left:-30%;
  pointer-events:none;
  background-image:
    radial-gradient(circle, rgba(255,255,255,0.8) 2px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,0.6) 2px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,0.4) 3px, transparent 3px);
  background-size:80px 80px, 120px 120px, 100px 100px;
  animation:sparkleFloat 6s linear infinite;
  opacity:0.9;
}
/* ==========================================================
      ‚≠ê ANIMATED BORDER FOR COMMON (Characters + Themes)
========================================================== */

@keyframes commonShimmer {
  0% { border-color: #d0d0d0; box-shadow: 0 0 4px rgba(200,200,200,0.4); }
  50% { border-color: #f5f5f5; box-shadow: 0 0 10px rgba(230,230,230,0.8); }
  100% { border-color: #d0d0d0; box-shadow: 0 0 4px rgba(200,200,200,0.4); }
}

/* ‚≠ê COMMON (Characters) */
.common {
  position:relative;
  animation: floatUp 3s ease-in-out infinite, commonShimmer 2.8s ease-in-out infinite;
}

.common img {
  animation: commonShimmer 2.8s ease-in-out infinite;
}

/* ‚≠ê THEME COMMON */
.theme-common {
  position:relative;
  animation: floatUp 3s ease-in-out infinite, commonShimmer 2.8s ease-in-out infinite;
}

.theme-common img {
  animation: commonShimmer 2.8s ease-in-out infinite;
}

